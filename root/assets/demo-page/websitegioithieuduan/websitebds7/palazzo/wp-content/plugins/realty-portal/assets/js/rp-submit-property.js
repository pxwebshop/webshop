jQuery(document).ready(function($){'use strict';var body=$('body');var submit_form=false;jQuery('#rp-property-submit').mousedown(function(){tinyMCE.triggerSave();});$('#rp-property-submit').submit(function(event){event.preventDefault();body.append('<div class="rp-notice-message"></div>');body.find('.rp-notice-message').html('');var $$=$(this),data=$('#rp-property-submit').serializeArray();data.push({'name':'action','value':'rp_submit_property'},{'name':'security','value':RP_Property.security},{'name':'description','value':$('#rp-field-item-description').val()});$.ajax({url:RP_Property.ajax_url,type:'POST',dataType:'json',data:data,beforeSend:function(){$$.find('.rp-property-action .rp-button >i').removeClass('hide');},success:function(property){try{$$.find('.rp-property-action .rp-button >i').addClass('hide');if('success'===property.status){$.notifyBar({cssClass:property.status,html:property.message,position:"bottom"});submit_form=true;if(typeof property.url!=='undefined'&&property.url!==''){window.location.href=property.url;}}
$.notifyBar({cssClass:property.status,html:property.message,position:"bottom"});}catch(err){$.notifyBar({cssClass:'error',html:property.message,position:"bottom"});}}});body.find('.rp-notice-message').find('.rp-notice-message-item').each(function(index,el){setTimeout(function(){$(this).remove();},2000);});});if(jQuery('#rp-property-submit').length){jQuery(window).on("beforeunload",function(){if(!submit_form)
return "Are you sure? You didn't finish the form!";});}});