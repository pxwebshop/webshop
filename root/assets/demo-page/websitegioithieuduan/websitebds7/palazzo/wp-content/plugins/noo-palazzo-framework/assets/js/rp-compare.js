(function($){'use strict';$(document).ready(function(){$(document).on('click','.more-action > .compare',function(event){event.preventDefault();var current_event=$(this).find('.rp-event'),pprocess=current_event.data('process');if('compare'===pprocess){var property_id=current_event.data('id');var stm_timeout;var data_info={action:'noo_palazzo_compare_add_property',property_id:property_id};$.ajax({url:RP_Compare.ajax_url,type:"POST",dataType:"json",data:data_info,beforeSend:function(){current_event.removeClass('rp-icon-exchange');current_event.addClass('fa fa-spinner fa-spin').css({'border':'none'});clearTimeout(stm_timeout);},success:function(data){clearTimeout(stm_timeout);current_event.removeClass('fa fa-spinner fa-spin');current_event.addClass('rp-icon-exchange');try{$('.single-add-to-compare').addClass('single-add-to-compare-visible');$('.single-add-to-compare .stm-title').text(data.message);stm_timeout=setTimeout(function(){$('.single-add-to-compare').removeClass('single-add-to-compare-visible');},5000);if('success'===data.status){$('#noo-compare-bar .compare-icon .number').html(data.total);current_event.removeClass('rp-icon-exchange');current_event.addClass('fa fa-check');current_event.data('process','remove-compare');if(data.total<=1){$('.single-add-to-compare').find('.compare-fixed-link').hide();$('#noo-compare-bar').find('.list-label').html(RP_Compare.txt_add_compare);$('.url-compare').attr('href',RP_Compare.url_property);}else{$('.single-add-to-compare').find('.compare-fixed-link').show();$('.single-add-to-compare .compare-fixed-link').attr('href',RP_Compare.url_compare);$('.url-compare').attr('href',RP_Compare.url_compare);$('#noo-compare-bar').find('.list-label').html(RP_Compare.txt_view_compare);}}}catch(err){alert(err);}}});}else if('remove-compare'===pprocess){var property_id=current_event.data('id');var stm_timeout;var data_info={action:'noo_palazzo_compare_remove_property',property_id:property_id};$.ajax({url:RP_Compare.ajax_url,type:"POST",dataType:"json",data:data_info,beforeSend:function(){current_event.removeClass('fa fa-check');current_event.addClass('fa fa-spinner fa-spin').css({'border':'none'});clearTimeout(stm_timeout);},success:function(data){clearTimeout(stm_timeout);current_event.removeClass('fa fa-spinner fa-spin');current_event.addClass('fa fa-check');try{current_event.removeClass('fa fa-check');current_event.addClass('rp-icon-exchange');$('.single-add-to-compare').addClass('single-add-to-compare-visible');$('.single-add-to-compare .stm-title').text(data.message);$('#noo-compare-bar .compare-icon .number').html(data.total);stm_timeout=setTimeout(function(){$('.single-add-to-compare').removeClass('single-add-to-compare-visible');},5000);current_event.data('process','compare');if(data.total<=1){$('.single-add-to-compare').find('.compare-fixed-link').hide();$('#noo-compare-bar').find('.list-label').html(RP_Compare.txt_add_compare);$('.url-compare').attr('href',RP_Compare.url_property);}else{$('.single-add-to-compare').find('.compare-fixed-link').show();$('#noo-compare-bar').find('.list-label').html(RP_Compare.txt_view_compare);$('.single-add-to-compare .compare-fixed-link').attr('href',RP_Compare.url_compare);$('.url-compare').attr('href',RP_Compare.url_compare);}}catch(err){alert(err);}}});}});$(document).on('click','.compare-property-remove',function(e){e.preventDefault();var property_id=$(this).data('id');var current_event=$(this);var stm_timeout;var data_info={action:'rp_compare_add_property',property_id:property_id};$.ajax({url:RP_Compare.ajax_url,type:"POST",dataType:"json",data:data_info,beforeSend:function(){current_event.addClass('fa-spin');},success:function(response){try{var data_child={action:'rp_compare_update_basket'};$.post(RP_Compare.ajax_url,data_child,function(data){$('#compare-'+property_id).removeClass('compare-item').addClass('compare-empty');$('#compare-'+property_id+' .compare-empty-content').html($('#compare-empty-content').clone()).find('#compare-empty-content').removeClass('hidden');$('.compare-col-'+property_id).find('.compare-value-hover > div').hide().html('---').show('fold');$('.compare-col-features-'+property_id).html('');current_event.removeClass('fa-spin');$('.single-add-to-compare').addClass('single-add-to-compare-visible');$('.single-add-to-compare .stm-title').text(data.message);$('#noo-compare-bar .compare-icon .number').html(data.total);stm_timeout=setTimeout(function(){$('.single-add-to-compare').removeClass('single-add-to-compare-visible');},5000);if(data.total<=1){$('.single-add-to-compare').find('.compare-fixed-link').hide();$('#noo-compare-bar').find('.list-label').html(RP_Compare.txt_add_compare);$('.url-compare').attr('href',RP_Compare.url_property);}else if(data.total<1){$('.row-compare-features').hide();}else{$('.single-add-to-compare').find('.compare-fixed-link').show();$('#noo-compare-bar').find('.list-label').html(RP_Compare.txt_view_compare);$('.single-add-to-compare .compare-fixed-link').attr('href',RP_Compare.url_compare);$('.url-compare').attr('href',RP_Compare.url_compare);}});}catch(err){alert(err);}}});return false;});});})(jQuery);