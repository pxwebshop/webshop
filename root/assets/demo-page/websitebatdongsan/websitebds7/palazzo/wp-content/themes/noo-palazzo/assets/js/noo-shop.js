var WOO={};(function($){'use strict';var $window=$(window),$body=$('body'),isRTL=$body.hasClass('rtl')?true:false;WOO.common={init:function(){WOO.common.filter();WOO.common.filterMobile();WOO.common.filterToggles();WOO.common.setCartScrollBar();WOO.common.addCartQuantity();WOO.common.addToCart();WOO.common.quickView();WOO.common.compare();WOO.common.updateShippingMethod();WOO.common.addToWishlist();WOO.common.sc_productMasonry();WOO.common.wooMasonryLayout();WOO.common.spSticky();WOO.common.loadMore();WOO.common.infiniteScroll();WOO.common.paymentMethod();WOO.common.masonryTabitem();WOO.common.tab_ajax();WOO.common.productTab_loadmore();WOO.common.accessories();WOO.common.variationChange();},filter:function(){$(document).on('click','.noo-filter-search .noo-filter',function(e){e.preventDefault();if($('.noo-search-field').hasClass('active')){$('.noo-search-field').slideUp(function(){$('.noo-filter-search .noo-search, .noo-search-field').removeClass('active');if($('.woocommerce-sidebar').hasClass('active')){$('.woocommerce-sidebar').removeClass('active');$('.woocommerce-sidebar').slideUp();}else{$('.woocommerce-sidebar').addClass('active');$('.woocommerce-sidebar').slideDown();}});}else{$('.woocommerce-sidebar').slideToggle();}
if($(this).hasClass('active')){$(this).removeClass('active');}else{$(this).addClass('active');}});$(document).on('click','.noo-filter-search .noo-search',function(e){e.preventDefault();$(this).toggleClass('active');if($('.noo-filter-sidebar').length>0){$('.noo-search-field').slideToggle();}else{$('.noo-filter-categories > li').removeClass('current-cat');$('.woocommerce-sidebar.top').slideUp(function(){$('.noo-filter-search .noo-filter, .woocommerce-sidebar.top').removeClass('active');if($('.noo-search-field').hasClass('active')){$('.noo-search-field').removeClass('active');$('.noo-search-field').slideUp();}else{$('.noo-search-field').addClass('active');$('.woocommerce-sidebar.top').removeClass('active');$('.noo-search-field').slideDown();}});if($(this).hasClass('active')){$(this).removeClass('active');}else{$(this).addClass('active');}}});var shop_ajax=$('.site-content-archive-product').attr('data-ajax');if(typeof(shop_ajax)!="undefined"&&shop_ajax=='enable'){$(document).on('click','.noo-filter-categories li a, aside ul li a, .tagcloud a,.noo-product-category > a,.noo-shop-results-bar a',function(e){e.preventDefault();var auto_close=$('.noo-filter-search .noo-filter').data('auto-close');$('.archive-product-wrap').removeClass('noo-loaded-product');$('.archive-product-wrap').addClass('noo-loading-product');$('.noo-filter-search .noo-search').removeClass('active');if(auto_close=='1'){$('.woocommerce-sidebar.top').slideUp();}
$('.noo-search-field').slideUp();$('.archive-product-wrap .woocommerce-no-products').css('opacity','0');$('.woocommerce-pagination .noo-shop-loadmore').addClass('noo-hide-loadmore');$('.tagcloud > a').removeClass('current-tag');if($(this).closest('.noo-filter-categories').length>0){$('.noo-filter-categories li').removeClass('current-cat');$(this).parent().addClass('current-cat');}else{$('.noo-filter-categories li').removeClass('current-cat');}
window.history.pushState({},'',$(this).attr('href'));e.preventDefault();$('.product-listing, .woocommerce-no-products').before('<div class="noo-spinner"><i class="fa fa-spinner fa-spin"></i></div>');var url=$(this).attr('href');url=url.replace(/\/?(\?|#|$)/,"/$1");$.ajax({url:url,type:'POST',data:{shop_load:'full'},success:function(data){$('.noo-spinner').remove();$('.archive-product-wrap').removeClass('noo-loading-product');$('.archive-product-wrap').html(data);$('.archive-product-wrap').addClass('noo-loaded-product');$('.woocommerce-pagination .noo-shop-loadmore').addClass('noo-show-loadmore');$('.tagcloud > a').each(function(){if($(this).attr('href')==window.location.href){$(this).addClass('current-tag');}});$('.product-listing').isotope();imagesLoaded($('.product-listing'),function(){$('.product-listing').isotope('layout');});NOO.common.tooltip();WOO.common.lazyload();setTimeout(function(){$('.archive-product-wrap').removeClass('noo-loaded-product');$('.woocommerce-pagination .noo-shop-loadmore').removeClass('noo-show-loadmore');},200);}})});$(document).on('click','.noo-search-field button[type="submit"]',function(e){$('.woocommerce-pagination .noo-shop-loadmore').css('opacity','0');e.preventDefault();var keyword_search=$('.noo-search-field .search-field').val();keyword_search=keyword_search.trim();if(keyword_search.length){e.preventDefault();if($('.product-listing').length){$('.product-listing').html('<div class="noo-spinner"><i class="fa fa-spinner fa-spin"></i></div>');}else if($('.woocommerce-no-products').length){$('.woocommerce-no-products').html('<div class="noo-spinner"><i class="fa fa-spinner fa-spin"></i></div>');}
$.ajax({url:noo_framework_constant.get_search_url+encodeURIComponent(keyword_search),type:'GET',data:{shop_load:"full",post_type:"product"},success:function(data){$('.noo-filter-categories > li').removeClass('current-cat');$('.noo-spinner').html();$('.archive-product-wrap').html(data);if($('.noo-filter-search .noo-search').hasClass('active')){$('.noo-search-field .search-field').val(keyword_search);}
$('.product-listing').isotope();imagesLoaded($('.product-listing'),function(){$('.product-listing').isotope('layout');});NOO.common.tooltip();WOO.common.lazyload();}});$('.search-message').html('');}else{$('.search-message').html(noo_framework_constant.enter_keyword);}});$(document).on('click','.noo-shop-loadmore',function(e){e.preventDefault();var link=$(this).data('link');var current_page=$(this).data('page');var totalpage=$(this).data('totalpage');if(totalpage<current_page){$('.woocommerce-pagination').html('<div class="noo-show-all">'+noo_framework_constant.noo_all_products+'</div>').addClass('noo-all-product');}else{$(this).attr('href',link.replace('%#%',current_page));$(this).data('page',current_page+1);$('.woocommerce-pagination .noo-shop-loadmore').text('').append('<i class="fa fa-spinner fa-spin"></i>');$.ajax({url:$(this).attr('href'),type:'POST',data:{shop_load:'full',pagination:'load_more'},success:function(data){$('.woocommerce-pagination .noo-shop-loadmore').text('Load more');var newItems=(data);newItems="<div>"+data+"</div>";newItems=$(newItems).children(".noo-filter-result").children(".product-item-wrap");$('.product-listing').isotope('layout');$('.product-listing').append(newItems).isotope('appended',newItems);imagesLoaded($('.product-listing'),function(){$('.product-listing').isotope('layout');});NOO.common.tooltip();WOO.common.lazyload();}});}});}
if(window.location.href.search('s=')!=-1){$('.noo-filter-search .noo-search').addClass('active');}
if($('.tagcloud').length==1){$('.tagcloud > a').each(function(){if($(this).attr('href')==window.location.href){$(this).addClass('current-tag');}});}},filterMobile:function(){$('.noo-filter-categories-mobile').on('click',function(){if($(window).width()<992){$(this).toggleClass('active');$(this).parent().find('.noo-filter-categories').slideToggle(300);}else{$('.noo-filter-categories').css({"display":"block"});$('.noo-filter-categories-mobile').removeClass('active');}});},filterToggles:function(){$('.noo-filter-widget .widget-title').on('click',function(e){e.preventDefault();if($(window).width()<992){$(this).parents('.noo-filter-widget').addClass('filter-toggle');if($('.noo-filter-widget').hasClass('filter-toggle')){var currentAttrValue=$(this).parent().attr('id');if($(this).is('.active')){$('.noo-filter-widget .widget-title').removeClass('active');}else{$('.noo-filter-widget .widget ul').slideUp(300).removeClass('open');$(this).addClass('active');$('.noo-filter-widget '+'#'+currentAttrValue+' ul').slideDown(300).addClass('open');$('.noo-filter-widget '+'#'+currentAttrValue+' .tagcloud').slideDown(300).addClass('open');}}}else{$('.noo-filter-widget').removeClass('filter-toggle');$('.noo-filter-widget .widget ul').css({"display":"block"});}});},windowResized:function(){WOO.common.setCartScrollBar();},windowLoad:function(){WOO.common.lazyload();WOO.common.setCartScrollBar();},setCartScrollBar:function(){var $adminBar=$('#wpadminbar');var $adminBarHeight=$adminBar.outerHeight();var $site_top=$('.site-top').outerHeight();var $shopping_cart_wrapper=$('.shopping-cart-wrapper').outerHeight();var $windowHeight=$window.height();var $divCartWrapperHeight=417;var $bufferBottom=40;var $maxCartHeight=325;var $heightScroll='125px';var $max_item_product=3;if($windowHeight-$adminBarHeight-$site_top-$shopping_cart_wrapper-$bufferBottom<$divCartWrapperHeight){$maxCartHeight=200;$heightScroll='100px';$max_item_product=2;}
setTimeout(function(){if($('.scrollbar-inner').length){$('.scrollbar-inner').scrollbar();}
$('ul.cart_list.product_list_widget.scrollbar-inner').parent().css('max-height',$maxCartHeight);if($("ul.cart_list.product_list_widget.scrollbar-inner li").length>$max_item_product){$('ul.cart_list.product_list_widget.scrollbar-inner .scroll-y').css('height',$heightScroll);}},1000);$('body').on('click','.add_to_cart_button.ajax_add_to_cart',function(event){event.preventDefault();setTimeout(function(){$('.header-desktop-wrapper .mini-cart-hover > .scrollbar-inner').scrollbar();$('ul.cart_list.product_list_widget.scrollbar-inner').parent().css('max-height',$maxCartHeight);if($("ul.cart_list.product_list_widget.scrollbar-inner li").length>$max_item_product){$('ul.cart_list.product_list_widget.scrollbar-inner .scroll-y').css('height',$heightScroll);}},4000);});},addCartQuantity:function(){$(document).off('click','.quantity .btn-number').on('click','.quantity .btn-number',function(event){event.preventDefault();var type=$(this).data('type'),input=$('input',$(this).parent()),current_value=parseFloat(input.val()),max=parseFloat(input.attr('max')),min=parseFloat(input.attr('min')),step=parseFloat(input.attr('step')),stepLength=0;if(input.attr('step').indexOf('.')>0){stepLength=input.attr('step').split('.')[1].length;}
if(isNaN(max)){max=100;}
if(isNaN(min)){min=0;}
if(isNaN(step)){step=1;stepLength=0;}
if(!isNaN(current_value)){if(type=='minus'){if(current_value>min){current_value=(current_value-step).toFixed(stepLength);input.val(current_value).change();}
if(parseFloat(input.val())<=min){input.val(min).change();$(this).attr('disabled',true);}}
if(type=='plus'){if(current_value<max){current_value=(current_value+step).toFixed(stepLength);input.val(current_value).change();}
if(parseFloat(input.val())>=max){input.val(max).change();$(this).attr('disabled',true);}}}else{input.val(min);}});$('input','.quantity').focusin(function(){$(this).data('oldValue',$(this).val());});$('input','.quantity').on('change',function(){var input=$(this),max=parseFloat(input.attr('max')),min=parseFloat(input.attr('min')),current_value=parseFloat(input.val()),step=parseFloat(input.attr('step'));if(isNaN(max)){max=100;}
if(isNaN(min)){min=0;}
if(isNaN(step)){step=1;}
var btn_add_to_cart=$('.add_to_cart_button',$(this).parent().parent().parent());if(current_value>=min){$(".btn-number[data-type='minus']",$(this).parent()).removeAttr('disabled');if(typeof(btn_add_to_cart)!='undefined'){btn_add_to_cart.attr('data-quantity',current_value);}}else{alert('Sorry, the minimum value was reached');$(this).val($(this).data('oldValue'));if(typeof(btn_add_to_cart)!='undefined'){btn_add_to_cart.attr('data-quantity',$(this).data('oldValue'));}}
if(current_value<=max){$(".btn-number[data-type='plus']",$(this).parent()).removeAttr('disabled');if(typeof(btn_add_to_cart)!='undefined'){btn_add_to_cart.attr('data-quantity',current_value);}}else{alert('Sorry, the maximum value was reached');$(this).val($(this).data('oldValue'));if(typeof(btn_add_to_cart)!='undefined'){btn_add_to_cart.attr('data-quantity',$(this).data('oldValue'));}}});},addToCart:function(){$('.product-item-wrap').on('click','.add_to_cart_button',function(){var button=$(this);if(!button.hasClass('single_add_to_cart_button')&&button.is('.product_type_simple')){button.addClass("added-spinner");button.find('i').attr('class','fa fa-spinner fa-spin');}});$(document).bind("product-item-wrap added_to_cart",function(event,fragments,cart_hash,$thisbutton){var is_single_product=$thisbutton.hasClass('single_add_to_cart_button');if(is_single_product)return;var button=$thisbutton,buttonWrap=button.parent(),buttonViewCart=buttonWrap.find('.added_to_cart'),addedTitle=buttonViewCart.text(),productWrap=buttonWrap.parent().parent().parent().parent();console.log(button);button.remove();setTimeout(function(){$('.product-item-wrap.button-has-tooltip .added_to_cart').each(function(){buttonWrap.tooltip('hide').attr('title',addedTitle).tooltip('fixTitle');});},500);setTimeout(function(){productWrap.removeClass('active');},700);});},compare:function(){$(document).on('click','a.add_to_compare',function(event){event.preventDefault();var button=$(this),buttonWrap=button.parent();button.find('i').attr('class','fa fa-spinner fa-spin');var productWrap=buttonWrap.parent().parent().parent().parent();if(typeof(productWrap)=='undefined'){return;}
productWrap.addClass('active');});},quickView:function(){var is_click_quick_view=false;$(document).on('click','a.product-quick-view',function(event){event.preventDefault();if(is_click_quick_view)return;is_click_quick_view=true;var product_id=$(this).data('product_id'),popupWrapper='#popup-product-quick-view-wrapper',$icon=$(this).find('i'),iconClass=$icon.attr('class'),productWrap=$(this).parent().parent().parent().parent(),button=$(this);productWrap.addClass('active');button.addClass('active');$icon.attr('class','fa fa-spinner fa-spin');$.ajax({url:noo_framework_ajax_url,data:{action:'product_quick_view',id:product_id},success:function(html){productWrap.removeClass('active');button.removeClass('active');$icon.attr('class',iconClass);if($(popupWrapper).length){$(popupWrapper).remove();}
$('body').append(html);$(popupWrapper).modal().hide();$(popupWrapper).fadeIn(500);is_click_quick_view=false;},error:function(html){NOO.common.hideLoading();is_click_quick_view=false;}});});},updateShippingMethod:function(){$body.bind('updated_shipping_method',function(){$('select.country_to_state, input.country_to_state').change();});},addToWishlist:function(){$('.product-item-wrap').on('click','.add_to_wishlist',function(){var button=$(this),buttonWrap=button.parent().parent();if(!buttonWrap.parent().hasClass('single-product-function')){button.addClass("added-spinner");button.append('<i class = "fa fa-spinner fa-spin"></i>');}});$body.bind("added_to_wishlist",function(event,fragments,cart_hash,$thisbutton){var button=$('.added-spinner.add_to_wishlist'),buttonWrap=button.parent().parent();if(!buttonWrap.parent().hasClass('single-product-function')){setTimeout(function(){button.find('i').removeClass('fa fa-spinner fa-spin');button.removeClass('added-spinner');},700);}
WOO.common.updateWishlist();});$('#yith-wcwl-form table tbody tr td a.remove, #yith-wcwl-form table tbody tr td a.add_to_cart_button').on('click',function(){var old_num_product=$('#yith-wcwl-form table tbody tr[id^="yith-wcwl-row"]').length;var count=1;var time_interval=setInterval(function(){count++;var new_num_product=$('#yith-wcwl-form table tbody tr[id^="yith-wcwl-row"]').length;if(old_num_product!=new_num_product||count==20){clearInterval(time_interval);WOO.common.updateWishlist();}},500);});},updateWishlist:function(){if(typeof noo_framework_ajax_url=='undefined'){return;}
var wishlist_wrapper=jQuery('.my-wishlist-wrapper');if(wishlist_wrapper.length==0){return;}
wishlist_wrapper.addClass('loading');jQuery.ajax({type:'POST',url:noo_framework_ajax_url,data:{action:'update_woocommerce_wishlist'},success:function(response){var first_icon=wishlist_wrapper.children('i.fa:first');wishlist_wrapper.html(response);if(first_icon.length>0){wishlist_wrapper.prepend(first_icon);}
wishlist_wrapper.removeClass('loading');}});setTimeout(function(){$('.button-has-tooltip').each(function(){$(this).find('.yith-wcwl-wishlistexistsbrowse.show,.yith-wcwl-wishlistaddedbrowse.show').tooltip({title:noo_framework_constant.product_wishList_added});});},500);},masonryTabitem:function(){if($('.noo-product-tabs-ajax').length>0){var $wrap_id=$('.noo-product-tabs-ajax').attr('id');var $container=$('#'+$wrap_id+' .noo-template-tab').isotope({itemSelector:'#'+$wrap_id+' .product-item-wrap',layoutMode:'masonry',});$container.imagesLoaded().progress(function(){$container.isotope('layout');});}},tab_ajax:function(){if($('.noo-product-tabs-ajax').length>0){$('.noo-product-tabs-ajax').each(function(){var $wapp_id=$(this).attr('id');$(this).find('.noo-product-filters .noo-filter-tabs li a.noo-tab').on('click',function(e){var $this=$(this),ul_parent=$this.parents('.noo-filter-tabs');$('#'+$wapp_id+' .noo-product-tab-content').addClass('noo-loading');var wrap_id=ul_parent.attr('data-wrap-id'),tab_style=ul_parent.attr('data-display_type'),query_types=ul_parent.attr('data-query_types'),orderby=ul_parent.attr('data-orderby'),order=ul_parent.attr('data-order'),number_query=ul_parent.attr('data-number_query'),number_load=ul_parent.attr('data-number_load'),number_display=ul_parent.attr('data-number_display'),col=ul_parent.attr('data-col'),loadmore=ul_parent.attr('data-use-loadmore'),loadmore_text=ul_parent.attr('data-loadmore_text'),loaded_text=ul_parent.attr('data-loaded_text'),tab=$this.attr('data-tab');$.ajax({url:noo_framework_app.ajax_url,data:{action:'noo_tab_load_products',wrap_id:wrap_id,tab_style:tab_style,query_types:query_types,tab:tab,orderby:orderby,order:order,number_query:number_query,number_load:number_load,number_display:number_display,col:col,loadmore:loadmore,loadmore_text:loadmore_text,loaded_text:loaded_text,},type:'POST',success:function(data){if(data!=''){setTimeout(function(){$('#'+$wapp_id+' .noo-product-tab-content').removeClass('noo-loading');$('#'+$wapp_id+' .noo-product-tab-content .noo-tab-content').html(data).hide();$('#'+$wapp_id+' .noo-product-tab-content .noo-tab-content').fadeIn(1000);WOO.common.masonryTabitem();WOO.common.productTab_loadmore();NOO.common.tooltip();WOO.common.lazyload();},500);}else{}}});});});}},productTab_loadmore:function(){$('.noo-product-loadmore').each(function(){$(this).on('click',function(){var $this_=$(this);if(!$this_.hasClass('loaded')){var query_types,tab,orderby,order,number_load,start,loadtext,loadedtext,wrapid,col,loadmore;query_types=$this_.attr('data-query-types');tab=$this_.attr('data-tab');orderby=$this_.attr('data-orderby');order=$this_.attr('data-order');number_load=$this_.attr('data-number-load');start=$this_.attr('data-start');col=$this_.attr('data-col');loadmore=$this_.attr('data-use-loadmore');loadtext=$this_.attr('data-loadtext');loadedtext=$this_.attr('data-loadedtext');wrapid=$(this).parents('.noo-product-tabs-ajax').attr('id');$(this).addClass('noo-spin');var $container=$('#'+wrapid+' .noo-template-tab').isotope({itemSelector:'#'+wrapid+' .product-item-wrap',layoutMode:'masonry',});$.ajax({url:noo_framework_app.ajax_url,data:{action:'noo_product_loadmore',query_types:query_types,tab:tab,orderby:orderby,order:order,number_load:number_load,start:start,col:col,loadmore:loadmore},type:'POST',success:function(newElements,data){if($.trim(data)!=''){var $newElems=$(newElements).css({opacity:0});$('#'+wrapid+' .noo-product-tab-content .noo-tab-content .noo-template-tab').append($newElems);$newElems.imagesLoaded(function(){$newElems.animate({opacity:1},300);$container.isotope('appended',$newElems);$container.isotope('layout');});$($this_).removeClass('noo-spin');NOO.common.tooltip();WOO.common.lazyload();if((parseInt(start)+parseInt(number_load))>$('#'+wrapid+' .noo-product-tab-content .noo-tab-content .product-item-wrap').size()){$($this_).find(' > span').html(loadedtext).addClass('noo-end-load');}else{$($this_).find(' > span').html(loadtext);}
$($this_).attr('data-start',parseInt(start)+parseInt(number_load));}else{$($this_).find(' > span').html(loadedtext).addClass('noo-end-load');$($this_).removeClass('noo-spin');}}});}else{return false;}});});},sc_productMasonry:function(){$('.shortcode-product-grid').each(function(){var $wapp_id=$(this).attr('id');var currency_symbol=$(this).attr('data-currentcy-symbol');var sorting=$(this).attr('data-sort');var product_style=$(this).attr('data-product-style');var default_filter=$('#'+$wapp_id+' .noo-product-filters ul li').first().find('a').attr('data-option-value');$('#'+$wapp_id+' .noo-product-filters ul li').first().find('a').addClass('selected');$('#'+$wapp_id+' .bt-order').on('click',function(){$('#'+$wapp_id+' .product-sort').slideToggle(300);$(this).toggleClass('active');});var $container=$('#'+$wapp_id+' .product-listing').isotope({itemSelector:'#'+$wapp_id+' .product-item-wrap',layoutMode:product_style,filter:default_filter,getSortData:{title:function(itemElem){var title=$(itemElem).find('.product-info h3').text();return title;},price:function(itemElem){var weight=$(itemElem).find('.price ins .amount').text();var weight2=$(itemElem).find('.price .amount').text();var weight3=$(itemElem).find('.price ins .amount').first().text();if(weight3){weight=parseFloat(weight3.replace(currency_symbol,''));}else if(weight){weight=parseFloat(weight.replace(currency_symbol,''));}else if(weight2){weight=parseFloat(weight2.replace(currency_symbol,''));}else{weight=0;}
return weight;},onsale:function(itemElem){var onsale=$(itemElem).find('.on-sale').text();return onsale;}}});$('#'+$wapp_id+' .noo-product-filters').on('click','a',function(e){e.preventDefault();var filters=$(this).closest('ul');filters.find('.selected').removeClass('selected');$(this).addClass('selected');var filterValue=$(this).attr('data-option-value');$container.isotope({filter:filterValue});});if(sorting=='true'){var sortByValue='';$('#'+$wapp_id+' .list-sort').change(function(){var selected=$('#'+$wapp_id+' .select-asc-desc option[selected="selected"]').val();if(selected=='false'){selected=false;}
sortByValue=$(this).val();$(this).find('option').removeAttr('selected');$('#'+$wapp_id+' .list-sort option').each(function(){if(sortByValue==$(this).val()){$(this).attr('selected','selected');}});$container.isotope({sortBy:sortByValue,sortAscending:selected});});var sortByValue=$('#'+$wapp_id+' .list-sort option[selected="selected"]').val();if(sortByValue=='false'){sortByValue=false;}
$container.isotope({sortBy:sortByValue});$('#'+$wapp_id+' .select-asc-desc').change(function(){var selected=$(this).val();$(this).find('option').removeAttr('selected');$('#'+$wapp_id+' .select-asc-desc option').each(function(){if(selected==$(this).val()){$(this).attr('selected','selected');}});if(selected=='false'){selected=false;}
$container.isotope({sortBy:sortByValue,sortAscending:selected});});var default_selected=$('#'+$wapp_id+' .select-asc-desc option[selected="selected"]').val();if(default_selected=='false'){default_selected=false;}
$container.isotope({sortAscending:default_selected});}});},wooMasonryLayout:function(){var $product_masonry=$('.archive-product-wrap .product-listing'),product_style=$('.site-content-archive-product').attr('data-product-style');if($product_masonry.length>0){$product_masonry.imagesLoaded(function(){$product_masonry.isotope({itemSelector:'.product-item-wrap',layoutMode:product_style,isOriginLeft:!isRTL});setTimeout(function(){$product_masonry.isotope('layout');},1000);});}},loadMore:function(){if($('.shortcode-product-wrap').length>0){$('.shortcode-product-wrap').each(function(){var wrap_id=$(this).attr('id');$(document).on('click','#'+wrap_id+' .product-load-more',function(event){event.preventDefault();var $this=$(this).button('loading');var link=$(this).attr('data-href');var contentWrapper=$('#'+wrap_id+' .product-listing');var element='#'+wrap_id+' .product-item-wrap';$.get(link,function(data){var $new_wapp_id=$('.shortcode-product-wrap',data).attr('id');var new_element='#'+$new_wapp_id+' .product-item-wrap';var next_href=$('#'+$new_wapp_id+' .product-load-more',data).attr('data-href');var $newElems=$(new_element,data).css({opacity:0});$newElems.imagesLoaded(function(){$newElems.animate({opacity:1});if(contentWrapper.hasClass('grid')){contentWrapper.append($newElems).isotope('appended',$newElems);contentWrapper.imagesLoaded(function(){contentWrapper.isotope('layout');});}else{contentWrapper.append($newElems);}
NOO.common.tooltip();WOO.common.lazyload();});if(typeof(next_href)=='undefined'){$this.parent().remove();}else{$this.button('reset');$this.attr('data-href',next_href);}});});});}},infiniteScroll:function(){if($('.shortcode-product-wrap').length>0){$('.shortcode-product-wrap').each(function(){var wrap_id=$(this).attr('id');var contentWrapper=$('#'+wrap_id+' .product-listing');if($('#'+wrap_id+' .product-paging-infinity-scroll').length>0){contentWrapper.infinitescroll({navSelector:'#'+wrap_id+' #infinite_scroll_button',nextSelector:'#'+wrap_id+' #infinite_scroll_button a',itemSelector:'.product-item-wrap',loading:{'selector':'#'+wrap_id+' #infinite_scroll_loading','img':noo_framework_theme_url+'/assets/images/ajax-loader.gif','msgText':'Loading...','finishedMsg':''}},function(newElements,data,url){var $newElems=$(newElements).css({opacity:0});$newElems.imagesLoaded(function(){$newElems.animate({opacity:1});if(contentWrapper.hasClass('grid')){contentWrapper.isotope('appended',$newElems);contentWrapper.imagesLoaded(function(){contentWrapper.isotope('layout');});NOO.common.tooltip();}
WOO.common.lazyload();});});}});}},reinitFilter:function(){$('.product-creative').each(function(){var $col=$(this).attr('data-columns');var $item_per_page=6;if($col=='2')
$item_per_page=5;var $windowSize=$(window).width();if(600<=$windowSize&&$windowSize<=1023){$item_per_page=2;}
if($windowSize<600){$item_per_page=1;}
var $total_product=$('.iso-filter',$(this)).attr('data-total-product');var $total_page=0;$total_product=parseInt($total_product);if($total_product%$item_per_page>0)
$total_page=Math.floor($total_product/$item_per_page)+1;else
$total_page=Math.floor($total_product/$item_per_page);$('.iso-filter',$(this)).attr('data-total-pages',$total_page);var $product_wrap=$('.product-listing',$(this));var $index=1;var $page_class='';$('.product-item-wrap',$product_wrap).each(function(){$(this).removeClass(function(index,css){return(css.match(/\bpage-\S+/g)||[]).join(' ');});if($index%$item_per_page>0){$page_class='page-'+(Math.floor($index/$item_per_page)+1);}else{$page_class='page-'+Math.floor($index/$item_per_page);}
$(this).addClass($page_class);$index++;});var $filter_value='.page-1';$product_wrap.isotope({filter:$filter_value});$('.iso-filter',$(this)).attr('data-page',1);})},paymentMethod:function(){var $orderReview=$('#order_review');$orderReview.on('click','input[name=payment_method]',function(){$('.payment_box_title').removeClass('active');$(this).parent().addClass('active');});},spSticky:function(){if($.fn.stick_in_parent&&$(window).width()>767&&$('.sp-sticky').length>0){$(".sp-sticky").stick_in_parent({offset_top:90});}},lazyload:function(){$('img.yl-lazy-load').bind('load',function(){$(this).parents('.lazy-loading').removeClass('lazy-loading').addClass('lazy-loaded');});setTimeout(function(){$('img.yl-lazy-load').each(function(){if($(this).data('src')){$(this).attr('src',$(this).data('src'));}});},1000);},accessories:function(){if($('div').hasClass('accessories')){var accessory_checked_count=function(){var product_count=0;$('.accessory-checkbox .product-check').each(function(){if($(this).is(':checked')){product_count++;}});return product_count;}
var accessory_checked_total_price=function(){var total_price=0;$('.accessory-checkbox .product-check').each(function(){if($(this).is(':checked')){total_price+=parseFloat($(this).data('price'));}});return total_price;}
var accessory_checked_product_ids=function(){var product_ids=[];$('.accessory-checkbox .product-check').each(function(){if($(this).is(':checked')){product_ids.push($(this).data('product-id'));}});return product_ids;}
var accessory_unchecked_product_ids=function(){var product_ids=[];$('.accessory-checkbox .product-check').each(function(){if(!$(this).is(':checked')){product_ids.push($(this).data('product-id'));}});return product_ids;}
var accessory_checked_variable_product_ids=function(){var variable_product_ids=[];$('.accessory-checkbox .product-check').each(function(){if($(this).is(':checked')&&$(this).data('product-type')=='variable'){variable_product_ids.push($(this).data('product-id'));}});return variable_product_ids;}
var accessory_is_variation_selected=function(){if($(".single_add_to_cart_button").is(":disabled")){return false;}
return true;}
var accessory_refresh_fragments=function(response){var this_page=window.location.toString();var fragments=response.fragments;var cart_hash=response.cart_hash;if(fragments){$.each(fragments,function(key){$(key).addClass('updating');});}
if(fragments){$.each(fragments,function(key,value){$(key).replaceWith(value);});}
$('.shop_table.cart').load(this_page+' .shop_table.cart:eq(0) > *',function(){$('.shop_table.cart').stop(true).css('opacity','1').unblock();$(document.body).trigger('cart_page_refreshed');});$('.cart_totals').load(this_page+' .cart_totals:eq(0) > *',function(){$('.cart_totals').stop(true).css('opacity','1').unblock();});}
$('body').on('found_variation',function(event,variation){$('.accessory-checkbox .product-check').each(function(){if($(this).is(':checked')&&$(this).data('product-type')=='variable'){$(this).data('price',variation.display_price);$(this).siblings('span.accessory-price').html($(variation.price_html).html());}});});$('body').on('woocommerce_variation_has_changed',function(event){var total_price=accessory_checked_total_price();$.ajax({type:"POST",async:false,url:noo_accessories_ajax_url,data:{'action':"noo_accessory_checked_total_price",'price':total_price},success:function(response){$('.total-price-html .amount').html(response);}})});$('.accessory-checkbox .product-check').on("click",function(){var total_price=accessory_checked_total_price();$.ajax({type:"POST",async:false,url:noo_accessories_ajax_url,data:{'action':"noo_accessory_checked_total_price",'price':total_price},success:function(response){$('.total-price-html .amount').html(response);$('.total-products').html(accessory_checked_count());var unchecked_product_ids=accessory_unchecked_product_ids();var unchecked_product_ids=accessory_unchecked_product_ids();$('.accessories .product-listing .product-item-wrap').each(function(){$(this).removeClass('product-not-checked');$(this).addClass('product-checked');for(var i=0;i<unchecked_product_ids.length;i++){if($(this).hasClass('post-'+unchecked_product_ids[i])){$(this).removeClass('product-checked');$(this).addClass('product-not-checked');}}});}})});$('.accessories-add-to-cart .add-to-cart').on('click',function(){$(this).addClass('ac-loading');var accerories_all_product_ids=accessory_checked_product_ids();var accerories_variable_product_ids=accessory_checked_variable_product_ids();if(accerories_all_product_ids.length===0){var accerories_alert_msg=noo_accessories_msg['empty'];}else if(accerories_variable_product_ids.length>0&&accessory_is_variation_selected()===false){var accerories_alert_msg=noo_accessories_msg['no_variation'];}else{for(var i=0;i<accerories_all_product_ids.length;i++){if(!$.inArray(accerories_all_product_ids[i],accerories_variable_product_ids)){var variation_id=$('.variations_form .variations_button').find('input[name^=variation_id]').val();var variation={};if($('.variations_form').find('select[name^=attribute]').length){$('.variations_form').find('select[name^=attribute]').each(function(){var attribute=$(this).attr("name");var attributevalue=$(this).val();variation[attribute]=attributevalue;});}else{$('.variations_form').find('.select').each(function(){var attribute=$(this).attr("data-attribute-name");var attributevalue=$(this).find('.selected').attr('data-name');variation[attribute]=attributevalue;});}
$.ajax({type:"POST",async:false,url:noo_accessories_ajax_url,data:{'action':"noo_add_to_cart",'product_id':accerories_all_product_ids[i],'variation_id':variation_id,'variation':variation},success:function(response){accessory_refresh_fragments(response);}})}else{$.ajax({type:"POST",async:false,url:noo_accessories_ajax_url,data:{'action':"woocommerce_add_to_cart",'product_id':accerories_all_product_ids[i]},success:function(response){accessory_refresh_fragments(response);}})}}
var accerories_alert_msg=noo_accessories_msg['success'];$(this).removeClass('ac-loading');}
$('.noo-product-message').html(accerories_alert_msg);});}},variationChange:function(){$('.variations_form .variations ul.variable-items-wrapper').each(function(i,el){var select=$(this).prev('select');var li=$(this).find('li');$(this).on('click','li:not(.selected)',function(){var value=$(this).data('value');li.removeClass('selected');select.val(value).trigger('change');$(this).addClass('selected');});$(this).on('click','li.selected',function(){li.removeClass('selected');select.trigger('click');select.trigger('focusin');select.trigger('touchstart');});});$('.variations_form .variations').each(function(i,el){$(this).on('click','.reset_variations',function(){$('.variations_form .variations').find('li').removeClass('selected');});});}}
WOO.onReady={init:function(){WOO.common.init();}};WOO.onLoad={init:function(){WOO.common.windowLoad();}};WOO.onResize={init:function(){WOO.common.windowResized();}}
$(window).on('load',WOO.onLoad.init);$(document).ready(WOO.onReady.init);$(window).resize(WOO.onResize.init);})(jQuery);